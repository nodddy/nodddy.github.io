{%extends 'polls/base.html'%}

{% block content %}

<form action="{% url 'polls:index' %}">
    <input type="submit" value="Back to Overview">
</form>


<h1>
    {{ parent.name }}
</h1>


<ul>

    {% if update_name == 'experiment' %}
    {% include 'polls/update-experiment.html' %}

    {% else %}
        <form action="{% url 'polls:update-experiment' parent_id %}" method="get">
            <input type="submit" value="Edit Experiment">
        </form>
        <li> Date: {{ parent.date }}</li>
        <li> Sample:
            <a href="{%url 'polls:sample-detail' parent.sample.id %}"> {{ parent.sample }}</a>
        </li>

    {% endif %}


</ul>

{{context}}
<h2> Experiment Parameters</h2>

{% if update_name == 'parameter' %}
{% include 'polls/child-update-form.html' %}

{% else %}
<form action="{% url 'polls:experiment-update-parameter' parent_id %}" method="get">
    <input type="submit" value="Edit">
</form>

{% for parameter in parent.experiment_parameters.all %}
<div class="inline">
    {{ parameter.name }} =
    {{ parameter.value }}
    {{ parameter.unit }}
</div>
{% endfor %}

{% endif %}


<h2> Experiment Procedure</h2>
<ol>
    {% block experiment-update-step %}
    <form action="{% url 'polls:experiment-update-step' parent_id %}" method="GET">
        <input type="submit" value="Edit">
    </form>
    {% for step in parent.experiment_steps.all %}
    <li>
        <div class="inline">
            {{ step.text }}
            {% if step.note %}
            ({{ step.note }})
            {% endif %}
            <ul>

                {% for step_parameter in step.step_parameters.all %}
                <li>
                    Step Parameters:
                    {{ step_parameter.name }} =
                    {{ step_parameter.value }}
                    {{ step_parameter.unit }}
                </li>
                {% endfor %}
            </ul>

        </div>
    </li>
    {% endfor %}

    {% endblock %}
</ol>


<h2> Experiment Notes</h2>

{% if update_name == "note" %}
{% include 'polls/child-update-form.html' %}

{% else %}
<form action="{% url 'polls:experiment-update-note' parent_id %}" method="GET">
    <input type="submit" value="Edit">
</form>

{% for note in parent.experiment_notes.all %}
<div class="inline">
    {{ note.text }}
</div>
{% endfor %}
{% endif %}
</div>


{% endblock %}
